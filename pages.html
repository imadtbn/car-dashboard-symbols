<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes">
    <title>دليل الطبلون | رموز السيارات حسب الحالة</title>
    <!-- Font Awesome 6 (مجاني) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* ========== RESET & GLOBAL ========== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background: linear-gradient(145deg, #eef2f6 0%, #dfe7ef 100%);
            min-height: 100vh;
            color: #0b2b3c;
            display: flex;
            flex-direction: column;
        }
        /* ========== الهيدر (ثابت في كل الصفحات) ========== */
        .app-header {
            background: rgba(255,255,255,0.8);
            backdrop-filter: blur(12px);
            padding: 16px 30px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            border-bottom: 2px solid white;
            box-shadow: 0 8px 20px -10px #1e3a5f;
            position: sticky;
            top: 0;
            z-index: 100;
            border-radius: 0 0 40px 40px;
            margin-bottom: 20px;
        }
        .logo-area {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .logo-icon {
            background: #0a2a44;
            width: 50px;
            height: 50px;
            border-radius: 25px 10px 25px 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            transform: rotate(5deg);
            box-shadow: 0 6px 12px rgba(0,50,80,0.3);
        }
        .logo-text h1 {
            font-size: 1.7rem;
            font-weight: 800;
            background: linear-gradient(135deg, #0b2b40, #1f4e7a);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .logo-text p {
            font-size: 0.8rem;
            color: #2d4b65;
        }
        .install-btn {
            background: #1d3a5c;
            color: white;
            border: none;
            padding: 10px 22px;
            border-radius: 60px;
            font-weight: 600;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 8px 14px -6px #091c30;
            cursor: pointer;
            transition: 0.2s;
            border: 1px solid #8ab3d0;
        }
        .install-btn i { font-size: 1.2rem; }
        .install-btn:hover { background: #14324f; transform: scale(1.03); }
        /* ========== قائمة التنقل (الصفحات) ========== */
        .nav-tabs {
            display: flex;
            gap: 10px;
            background: white;
            padding: 8px 18px;
            border-radius: 80px;
            box-shadow: inset 0 2px 6px #00000015, 0 8px 14px -10px #192434;
            flex-wrap: wrap;
            justify-content: center;
        }
        .nav-link {
            padding: 10px 20px;
            border-radius: 50px;
            font-weight: 600;
            background: transparent;
            color: #1e2b3c;
            transition: 0.15s;
            cursor: pointer;
            border: none;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 6px;
            white-space: nowrap;
        }
        .nav-link i { font-size: 1rem; }
        .nav-link.active {
            background: #1e2b3c;
            color: white;
            box-shadow: 0 5px 12px #142433;
        }
        /* ========== الحاوية الرئيسية ========== */
        .main-container {
            max-width: 1400px;
            margin: 10px auto 30px;
            padding: 0 20px;
            flex: 1;
            width: 100%;
        }
        /* ========== كل صفحة مخفية ما عدا النشطة ========== */
        .page {
            display: none;
            animation: fade 0.25s ease;
        }
        .page.active-page {
            display: block;
        }
        @keyframes fade { from { opacity: 0.2; } to { opacity: 1; } }
        /* ========== العنوان الوصفى لكل صفحة ========== */
        .page-title {
            text-align: center;
            margin: 10px 0 30px;
            font-size: 2.2rem;
            font-weight: 700;
            color: #1e3b5a;
            text-shadow: 2px 2px 0 white;
        }
        .page-title i { margin-left: 10px; }
        /* ========== صناديق البحث (كل صفحة) ========== */
        .search-wrapper {
            max-width: 500px;
            margin: 0 auto 30px;
            position: relative;
        }
        .search-wrapper i {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #5e6f88;
        }
        .search-input {
            width: 100%;
            padding: 16px 50px 16px 20px;
            border-radius: 60px;
            border: none;
            background: white;
            box-shadow: 0 10px 30px -14px #142b3b;
            font-size: 1rem;
            border: 1px solid #ffffff;
        }
        .search-input:focus { outline: 4px solid #a5c9ff; }
        /* ========== شبكة البطاقات (موحدة) ========== */
        .symbols-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }
        .symbol-card {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            border-radius: 40px;
            padding: 22px;
            box-shadow: 0 18px 35px -12px #142c3c;
            transition: 0.2s;
            border: 1px solid rgba(255,255,255,0.9);
            animation: cardFade 0.3s ease;
        }
        @keyframes cardFade { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .symbol-card:hover { transform: translateY(-6px); background: white; }
        .card-header { display: flex; gap: 15px; margin-bottom: 15px; }
        .icon-box {
            width: 70px; height: 70px; background: #ecf2f9; border-radius: 30px;
            display: flex; align-items: center; justify-content: center;
            font-size: 2.5rem; box-shadow: inset 0 -2px 0 #c0d0e0;
        }
        .title-area h3 { font-size: 1.3rem; margin-bottom: 5px; }
        .badge-color {
            display: inline-block; padding: 4px 16px; border-radius: 40px;
            font-size: 0.7rem; font-weight: 800; color: white; text-shadow: 0 1px 2px black;
        }
        .badge-red { background: #dc2626; }
        .badge-amber { background: #f59e0b; }
        .badge-green { background: #10b981; }
        .badge-blue { background: #3b82f6; }
        .meaning { margin: 12px 0; line-height: 1.5; }
        .action {
            background: #e9f0f9; border-radius: 24px; padding: 12px;
            border-right: 4px solid #1f5f8f; font-size: 0.9rem;
        }
        .card-footer {
            display: flex; justify-content: space-between; align-items: center;
            margin-top: 15px; border-top: 1px dashed #b3c5d6; padding-top: 12px;
        }
        .details-btn {
            background: none; border: 1px solid #becddb; padding: 6px 16px;
            border-radius: 50px; cursor: pointer; font-weight: 600;
            transition: 0.15s;
        }
        .details-btn:hover { background: #1e2b3c; color: white; border-color: #1e2b3c; }
        /* ========== صفحة النصائح (Tips) ========== */
        .tips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        .tip-card {
            background: rgba(255,255,240,0.7);
            backdrop-filter: blur(4px);
            padding: 30px 20px;
            border-radius: 50px;
            box-shadow: 0 20px 30px -12px #0b2b40;
            border: 1px solid white;
            transition: 0.2s;
            text-align: center;
        }
        .tip-card:hover { background: white; transform: scale(1.01); }
        .tip-icon { font-size: 2.8rem; color: #1d4f7c; margin-bottom: 15px; }
        .tip-card h3 { font-size: 1.6rem; margin-bottom: 15px; }
        .tip-card p { line-height: 1.7; color: #203e53; }
        /* ========== النافذة المنبثقة (مودال) ========== */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(6px);
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .modal-content {
            background: white;
            max-width: 450px;
            width: 90%;
            padding: 35px 30px;
            border-radius: 70px;
            box-shadow: 0 40px 70px -10px #02121f;
            text-align: center;
            border: 3px solid #bed9ff;
            position: relative;
        }
        .modal-icon { font-size: 4rem; margin-bottom: 15px; }
        .modal h2 { font-size: 2rem; margin-bottom: 10px; color: #142c3c; }
        .modal p { font-size: 1.1rem; margin: 15px 0; color: #1a4356; white-space: pre-line; }
        .close-modal {
            background: #1e3b5a; color: white; border: none;
            padding: 12px 35px; border-radius: 60px; font-size: 1.2rem;
            margin-top: 15px; cursor: pointer; font-weight: 600;
        }
        /* ========== الفوتر 3 أعمدة (موحد) ========== */
        .app-footer {
            background: #142433;
            color: #ecf3fa;
            padding: 40px 30px 20px;
            margin-top: 60px;
            border-radius: 60px 60px 0 0;
        }
        .footer-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .footer-col h4 { font-size: 1.3rem; margin-bottom: 20px; color: white; border-right: 4px solid #f5b041; padding-right: 12px; }
        .footer-col ul { list-style: none; }
        .footer-col li { margin: 12px 0; }
        .footer-col a { color: #b6d0e6; text-decoration: none; display: flex; align-items: center; gap: 8px; }
        .footer-col a:hover { color: white; }
        .social-icons { display: flex; gap: 20px; margin-top: 20px; }
        .social-icons a { background: #1f3b54; width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; }
        .copyright { text-align: center; margin-top: 35px; color: #8ea5bb; font-size: 0.9rem; }
        /* ========== تجاوب ========== */
        @media (max-width: 700px) {
            .app-header { flex-direction: column; gap: 15px; }
            .nav-tabs { width: 100%; }
            .footer-grid { grid-template-columns: 1fr; text-align: center; }
            .footer-col h4 { border-right: none; text-align: center; }
        }
    </style>
</head>
<body>
    <!-- هيدر موحد -->
    <header class="app-header">
        <div class="logo-area">
            <div class="logo-icon"><i class="fas fa-car"></i></div>
            <div class="logo-text">
                <h1>دليل الطبلون</h1>
                <p>رموز السيارات حسب الحالة</p>
            </div>
        </div>
        <div style="display: flex; gap: 15px; align-items: center; flex-wrap: wrap;">
            <nav class="nav-tabs">
                <button class="nav-link active" data-page="home"><i class="fas fa-home"></i> الرئيسية</button>
                <button class="nav-link" data-page="red"><i class="fas fa-exclamation-triangle" style="color:#b91c1c;"></i> أحمر</button>
                <button class="nav-link" data-page="amber"><i class="fas fa-tools" style="color:#b45309;"></i> برتقالي</button>
                <button class="nav-link" data-page="green"><i class="fas fa-check-circle" style="color:#047857;"></i> أخضر</button>
                <button class="nav-link" data-page="blue"><i class="fas fa-lightbulb" style="color:#1e3a8a;"></i> أزرق</button>
                <button class="nav-link" data-page="tips"><i class="fas fa-lightbulb"></i> نصائح</button>
            </nav>
            <button class="install-btn" id="installPwa"><i class="fas fa-download"></i> تثبيت</button>
        </div>
    </header>

    <main class="main-container">
        <!-- الصفحة الرئيسية (كل الرموز) -->
        <div id="homePage" class="page active-page">
            <h2 class="page-title"><i class="fas fa-border-all"></i> جميع الرموز</h2>
            <div class="search-wrapper">
                <i class="fas fa-search"></i>
                <input type="text" class="search-input" id="searchHome" placeholder="ابحث في جميع الرموز...">
            </div>
            <div id="homeContainer" class="symbols-grid"></div>
        </div>

        <!-- صفحة الأحمر -->
        <div id="redPage" class="page">
            <h2 class="page-title" style="color:#b91c1c;"><i class="fas fa-exclamation-triangle"></i> رموز حمراء (خطر - توقف فوري)</h2>
            <div class="search-wrapper">
                <i class="fas fa-search"></i>
                <input type="text" class="search-input" id="searchRed" placeholder="ابحث في الرموز الحمراء...">
            </div>
            <div id="redContainer" class="symbols-grid"></div>
        </div>

        <!-- صفحة البرتقالي -->
        <div id="amberPage" class="page">
            <h2 class="page-title" style="color:#b45309;"><i class="fas fa-tools"></i> رموز برتقالية (تحذير - فحص قريب)</h2>
            <div class="search-wrapper">
                <i class="fas fa-search"></i>
                <input type="text" class="search-input" id="searchAmber" placeholder="ابحث في الرموز البرتقالية...">
            </div>
            <div id="amberContainer" class="symbols-grid"></div>
        </div>

        <!-- صفحة الأخضر -->
        <div id="greenPage" class="page">
            <h2 class="page-title" style="color:#047857;"><i class="fas fa-check-circle"></i> رموز خضراء (أنظمة تعمل)</h2>
            <div class="search-wrapper">
                <i class="fas fa-search"></i>
                <input type="text" class="search-input" id="searchGreen" placeholder="ابحث في الرموز الخضراء...">
            </div>
            <div id="greenContainer" class="symbols-grid"></div>
        </div>

        <!-- صفحة الأزرق -->
        <div id="bluePage" class="page">
            <h2 class="page-title" style="color:#1e3a8a;"><i class="fas fa-lightbulb"></i> رموز زرقاء (إضاءة / معلومات)</h2>
            <div class="search-wrapper">
                <i class="fas fa-search"></i>
                <input type="text" class="search-input" id="searchBlue" placeholder="ابحث في الرموز الزرقاء...">
            </div>
            <div id="blueContainer" class="symbols-grid"></div>
        </div>

        <!-- صفحة النصائح -->
        <div id="tipsPage" class="page">
            <h2 class="page-title"><i class="fas fa-shield-alt"></i> نصائح وإرشادات</h2>
            <div class="tips-grid">
                <div class="tip-card"><div class="tip-icon"><i class="fas fa-oil-can"></i></div><h3>زيت المحرك</h3><p>افحص مستوى الزيت كل أسبوعين، وغير الزيت والفلتر حسب كتيب الصيانة. انخفاض الزيت يؤدي لتلف المحرك.</p></div>
                <div class="tip-card"><div class="tip-icon"><i class="fas fa-tachometer-alt"></i></div><h3>ضغط الإطارات</h3><p>احرص على ضغط هواء مناسب (مكتوب على الملصق الداخلي). الإطار المنفوخ يقلل عمره ويزيد استهلاك الوقود.</p></div>
                <div class="tip-card"><div class="tip-icon"><i class="fas fa-fan"></i></div><h3>نظام التبريد</h3><p>راقب حرارة المحرك. إذا ارتفعت المؤشر، أوقف السيارة فوراً وتأكد من ماء الردياتير بعد أن يبرد.</p></div>
                <div class="tip-card"><div class="tip-icon"><i class="fas fa-car-battery"></i></div><h3>البطارية</h3><p>إذا لاحظت بطء في التشغيل، افحص البطارية. نظف الأقطاب من التآكل. عمر البطارية يتراوح بين 3-5 سنوات.</p></div>
                <div class="tip-card"><div class="tip-icon"><i class="fas fa-exclamation-triangle"></i></div><h3>التحذيرات الحمراء</h3><p>لا تتجاهل أي ضوء أحمر في الطبلون. توقف بأمان وافتح الكتالوج أو استشر فني.</p></div>
                <div class="tip-card"><div class="tip-icon"><i class="fas fa-wrench"></i></div><h3>الصيانة الدورية</h3><p>التزم بمواعيد الصيانة المبرمجة. الفحص المبكر يوفر عليك إصلاحات كبيرة.</p></div>
            </div>
        </div>
    </main>

    <!-- فوتر موحد 3 أعمدة -->
    <footer class="app-footer">
        <div class="footer-grid">
            <div class="footer-col">
                <h4><i class="fas fa-info-circle"></i> عن الموقع</h4>
                <p style="line-height: 1.7;">دليل شامل لأكثر من 45 رمزاً في لوحة قيادة السيارة، مع شرح دقيق وإجراءات مقترحة. نساعدك على فهم سيارتك بشكل أفضل.</p>
            </div>
            <div class="footer-col">
                <h4><i class="fas fa-link"></i> روابط سريعة</h4>
                <ul>
                    <li><a href="#" data-page="home"><i class="fas fa-home"></i> الرئيسية</a></li>
                    <li><a href="#" data-page="red"><i class="fas fa-exclamation-triangle"></i> أحمر</a></li>
                    <li><a href="#" data-page="amber"><i class="fas fa-tools"></i> برتقالي</a></li>
                    <li><a href="#" data-page="green"><i class="fas fa-check-circle"></i> أخضر</a></li>
                    <li><a href="#" data-page="blue"><i class="fas fa-lightbulb"></i> أزرق</a></li>
                    <li><a href="#" data-page="tips"><i class="fas fa-lightbulb"></i> نصائح</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h4><i class="fas fa-share-alt"></i> تابعنا</h4>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-x-twitter"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                </div>
                <p style="margin-top: 20px;">© 2026 دليل الطبلون. جميع الحقوق محفوظة.</p>
            </div>
        </div>
        <div class="copyright">
            <i class="fas fa-car-side"></i> قُد بأمان
        </div>
    </footer>

    <!-- نافذة منبثقة موحدة -->
    <div id="detailsModal" class="modal">
        <div class="modal-content">
            <div class="modal-icon" id="modalIcon"><i class="fas fa-car"></i></div>
            <h2 id="modalTitle">عنوان الرمز</h2>
            <p id="modalDesc">شرح مفصل للرمز والإجراءات اللازمة.</p>
            <button class="close-modal" id="closeModal">حسناً</button>
        </div>
    </div>

    <script>
        (function() {
            // ---------- قاعدة البيانات الموحدة (أكثر من 45 رمز) ----------
            const symbolsData = [
                { name: "تحذير الزيت", icon: "fas fa-oil-can", color: "red", meaning: "انخفاض حاد في ضغط الزيت أو نقص شديد.", action: "توقف فوراً وأطفئ المحرك. تحقق من مستوى الزيت." },
                { name: "حرارة المحرك", icon: "fas fa-temperature-high", color: "red", meaning: "ارتفاع حرارة المحرك إلى درجة خطيرة.", action: "توقف في أسرع مكان آمن، أطفئ المحرك وانتظر حتى يبرد." },
                { name: "بطارية", icon: "fas fa-battery-full", color: "red", meaning: "عطل في نظام الشحن (الدينامو لا يشحن).", action: "أوقف الأحمال غير الضرورية وتوجه لأقرب ورشة." },
                { name: "نظام المكابح", icon: "fas fa-exclamation-circle", color: "red", meaning: "خلل خطير في المكابح (انخفاض سائل الفرامل).", action: "توقف فوراً وتحقق من فرامل اليد." },
                { name: "وسادة هوائية", icon: "fas fa-air-freshener", color: "red", meaning: "عطل في نظام الوسائد الهوائية (SRS).", action: "اذهب لأقرب مركز صيانة فوراً." },
                { name: "حزام الأمان", icon: "fas fa-user-check", color: "red", meaning: "حزام الأمان غير مربوط.", action: "اربط الحزام فوراً." },
                { name: "الباب مفتوح", icon: "fas fa-car-side", color: "red", meaning: "أحد الأبواب أو صندوق الخلفي غير مغلق.", action: "توقف وتأكد من إغلاق الأبواب." },
                { name: "ضغط الإطارات", icon: "fas fa-exclamation-triangle", color: "red", meaning: "انخفاض شديد في ضغط أحد الإطارات.", action: "انزل بهدوء، افحص الإطارات." },
                { name: "نظام التوجيه", icon: "fas fa-steering-wheel", color: "red", meaning: "عطل في نظام التوجيه.", action: "توقف فوراً إذا كان التوجيه صعباً." },
                { name: "ناقل الحركة", icon: "fas fa-cogs", color: "red", meaning: "ارتفاع حرارة القير أو عطل داخلي.", action: "أوقف السيارة واترك القير يبرد." },
                { name: "ABS", icon: "fas fa-brake-warning", color: "red", meaning: "خلل في نظام ABS.", action: "يمكن القيادة بحذر، لكن افحص في أقرب وقت." },
                { name: "الوقود منخفض", icon: "fas fa-gas-pump", color: "red", meaning: "الوقود على وشك النفاد.", action: "توقف في أقرب محطة." },
                { name: "زيت ناقل الحركة", icon: "fas fa-oil-can", color: "red", meaning: "حرارة زيت القير مرتفعة جداً.", action: "توقف واترك السيارة تبرد." },
                { name: "المكابح المتوقفة", icon: "fas fa-parking", color: "red", meaning: "فرامل اليد مشدودة أو عطل.", action: "حررها قبل القيادة." },
                { name: "فحص المحرك", icon: "fas fa-engine", color: "amber", meaning: "مشكلة في المحرك أو نظام الانبعاثات.", action: "افحص كمبيوتر السيارة في أقرب ورشة." },
                { name: "TPMS", icon: "fas fa-circle-exclamation", color: "amber", meaning: "نظام مراقبة الإطارات يشير لضغط غير طبيعي.", action: "افحص ضغط الهواء في جميع الإطارات." },
                { name: "ABS (تحذير)", icon: "fas fa-brake-warning", color: "amber", meaning: "خلل في نظام ABS فقط.", action: "المكابح العادية تعمل، لكن افحص قريباً." },
                { name: "جر السحب", icon: "fas fa-tachometer-alt", color: "amber", meaning: "نظام التحكم بالجر معطل.", action: "قد يكون عطل في المستشعرات." },
                { name: "فلتر الديزل", icon: "fas fa-filter", color: "amber", meaning: "فلتر الجسيمات الديزل مسدود.", action: "قم بقيادة السيارة بسرعة ثابتة." },
                { name: "مؤشر الصقيع", icon: "fas fa-snowflake", color: "amber", meaning: "درجة الحرارة أقل من 4°C قد يكون الطريق زلقاً.", action: "كن حذراً أثناء القيادة." },
                { name: "نظام الثبات ESP", icon: "fas fa-car-crash", color: "amber", meaning: "نظام التوازن الإلكتروني معطل.", action: "يفضل إصلاحه قريباً." },
                { name: "غسيل الزجاج", icon: "fas fa-wind", color: "amber", meaning: "مستوى سائل الغسيل منخفض.", action: "أضف سائل غسيل." },
                { name: "مكابح (تحذير)", icon: "fas fa-brake-warning", color: "amber", meaning: "تآكل في تيل الفرامل.", action: "افحص سمك التيل." },
                { name: "زر التشغيل", icon: "fas fa-key", color: "amber", meaning: "المفتاح الذكي غير موجود أو بطاريته ضعيفة.", action: "استبدل بطارية الريموت." },
                { name: "نظام الأمان", icon: "fas fa-shield-alt", color: "amber", meaning: "عطل في نظام منع التشغيل.", action: "استخدم المفتاح الاحتياطي." },
                { name: "المصابيح الخلفية", icon: "fas fa-lightbulb", color: "amber", meaning: "أحد المصابيح الخارجية معطل.", action: "افحص واستبدل المصباح." },
                { name: "سائل التبريد", icon: "fas fa-water", color: "amber", meaning: "منسوب ماء الردياتير منخفض.", action: "أضف ماء مبرد بعد أن يبرد المحرك." },
                { name: "تحذير المسار", icon: "fas fa-arrows-alt-h", color: "amber", meaning: "نظام البقاء في المسار ينبه لانحراف.", action: "انتبه لاتجاهك." },
                { name: "نظام التصادم", icon: "fas fa-car-crash", color: "amber", meaning: "تحذير من التصادم الأمامي.", action: "افحص حساسات الرادار." },
                { name: "انزلاق", icon: "fas fa-snowplow", color: "amber", meaning: "نظام منع الانزلاق يعمل.", action: "الطريق زلق، خفف السرعة." },
                { name: "نظام التعليق", icon: "fas fa-bus", color: "amber", meaning: "عطل في نظام التعليق المتكيف.", action: "افحص في ورشة متخصصة." },
                { name: "الضوء المنخفض", icon: "fas fa-lightbulb", color: "green", meaning: "المصابيح الأمامية المنخفضة مضاءة.", action: "لا إجراء." },
                { name: "إشارة الانعطاف", icon: "fas fa-arrow-left", color: "green", meaning: "إشارة الانعطاف تعمل.", action: "تأكد من إطفائه بعد الاستخدام." },
                { name: "مثبت السرعة", icon: "fas fa-clock", color: "green", meaning: "نظام تثبيت السرعة قيد التشغيل.", action: "يمكنك إلغاء التشغيل." },
                { name: "مصابيح الضباب", icon: "fas fa-fog", color: "green", meaning: "مصابيح الضباب الأمامية مضاءة.", action: "أطفئها عند تحسن الرؤية." },
                { name: "فتحة السقف", icon: "fas fa-chevron-up", color: "green", meaning: "فتحة السقف مفتوحة.", action: "أغلقها إذا أردت." },
                { name: "المرايا المسخنة", icon: "fas fa-bolt", color: "green", meaning: "مرايا جانبية مسخنة تعمل.", action: "تطفأ تلقائياً." },
                { name: "المقاعد المسخنة", icon: "fas fa-chair", color: "green", meaning: "مقعد ساخن يعمل.", action: "يمكن ضبط درجة الحرارة." },
                { name: "نظام اوتو ستارت", icon: "fas fa-play-circle", color: "green", meaning: "نظام إيقاف/تشغيل المحرك نشط.", action: "عادي." },
                { name: "مصابيح الطوارئ", icon: "fas fa-exclamation", color: "green", meaning: "أنوار الخطر (الفلشر) مضاءة.", action: "استخدمها فقط للتوقف الطارئ." },
                { name: "الضوء العالي", icon: "fas fa-lightbulb", color: "blue", meaning: "المصابيح العالية (الهاي بيم) قيد التشغيل.", action: "اخفض الضوء عند وجود مركبات قادمة." },
                { name: "محرك بارد", icon: "fas fa-thermometer-half", color: "blue", meaning: "درجة حرارة المحرك لا زالت منخفضة.", action: "قد يظهر في الأجواء الباردة." },
                { name: "مكيف داخلي", icon: "fas fa-wind", color: "blue", meaning: "وضع إعادة تدوير الهواء نشط.", action: "لا إجراء." },
                { name: "الوضع الاقتصادي", icon: "fas fa-leaf", color: "blue", meaning: "وضع القيادة الاقتصادية (Eco) مفعل.", action: "لا إجراء." },
                { name: "الضباب الخلفي", icon: "fas fa-car", color: "blue", meaning: "مصابيح الضباب الخلفية مضاءة.", action: "أطفئها عند تحسن الرؤية." }
            ];

            // عناصر الصفحات
            const pages = {
                home: document.getElementById('homePage'),
                red: document.getElementById('redPage'),
                amber: document.getElementById('amberPage'),
                green: document.getElementById('greenPage'),
                blue: document.getElementById('bluePage'),
                tips: document.getElementById('tipsPage')
            };

            // الحاويات
            const containers = {
                home: document.getElementById('homeContainer'),
                red: document.getElementById('redContainer'),
                amber: document.getElementById('amberContainer'),
                green: document.getElementById('greenContainer'),
                blue: document.getElementById('blueContainer')
            };

            // حقول البحث
            const searches = {
                home: document.getElementById('searchHome'),
                red: document.getElementById('searchRed'),
                amber: document.getElementById('searchAmber'),
                green: document.getElementById('searchGreen'),
                blue: document.getElementById('searchBlue')
            };

            // أزرار التنقل (الهيدر والفوتر)
            const navLinks = document.querySelectorAll('[data-page]');

            // المتغيرات الحالية للبحث في كل صفحة
            let searchTerms = { home: '', red: '', amber: '', green: '', blue: '' };

            // مودال
            const modal = document.getElementById('detailsModal');
            const modalIcon = document.getElementById('modalIcon');
            const modalTitle = document.getElementById('modalTitle');
            const modalDesc = document.getElementById('modalDesc');
            const closeModal = document.getElementById('closeModal');

            // دالة عرض الرموز في صفحة معينة
            function renderPage(pageId) {
                const container = containers[pageId];
                if (!container) return;
                const color = (pageId === 'home' ? null : pageId); // home يعرض الكل
                const searchTerm = searchTerms[pageId] || '';

                const filtered = symbolsData.filter(sym => {
                    const matchesColor = (pageId === 'home') || (sym.color === pageId);
                    const matchesSearch = sym.name.includes(searchTerm) || sym.meaning.includes(searchTerm) || sym.action.includes(searchTerm) || searchTerm === '';
                    return matchesColor && matchesSearch;
                });

                if (filtered.length === 0) {
                    container.innerHTML = `<div style="grid-column:1/-1; text-align:center; padding:50px; background:white; border-radius:60px;">لا توجد رموز مطابقة</div>`;
                    return;
                }

                let html = '';
                filtered.forEach((sym, idx) => {
                    const badge = `badge-${sym.color}`;
                    const colorName = sym.color === 'red' ? 'أحمر' : (sym.color === 'amber' ? 'برتقالي' : (sym.color === 'green' ? 'أخضر' : 'أزرق'));
                    html += `
                        <div class="symbol-card" style="animation-delay: ${idx*0.02}s">
                            <div class="card-header">
                                <div class="icon-box"><i class="${sym.icon}"></i></div>
                                <div class="title-area"><h3>${sym.name}</h3><span class="badge-color ${badge}">${colorName}</span></div>
                            </div>
                            <div class="meaning"><i class="fas fa-info-circle" style="color:#2563eb;"></i> ${sym.meaning}</div>
                            <div class="action"><i class="fas fa-hands-helping"></i> ${sym.action}</div>
                            <div class="card-footer">
                                <span><i class="far fa-bell"></i> رمز عالمي</span>
                                <button class="details-btn" data-name="${sym.name}" data-meaning="${sym.meaning}" data-action="${sym.action}" data-icon="${sym.icon}"><i class="fas fa-expand"></i> تفاصيل</button>
                            </div>
                        </div>
                    `;
                });
                container.innerHTML = html;

                // ربط أزرار التفاصيل
                container.querySelectorAll('.details-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const name = btn.dataset.name;
                        const meaning = btn.dataset.meaning;
                        const action = btn.dataset.action;
                        const icon = btn.dataset.icon;
                        modalIcon.innerHTML = `<i class="${icon}"></i>`;
                        modalTitle.innerText = name;
                        modalDesc.innerText = `❖ ${meaning}\n\n⚡ الإجراء: ${action}`;
                        modal.style.display = 'flex';
                    });
                });
            }

            // دالة تبديل الصفحة
            function switchPage(pageId) {
                // إخفاء كل الصفحات
                Object.values(pages).forEach(p => p.classList.remove('active-page'));
                // إظهار المطلوبة
                if (pages[pageId]) pages[pageId].classList.add('active-page');
                // تحديث النشاط في أزرار التنقل
                navLinks.forEach(link => {
                    if (link.dataset.page === pageId) link.classList.add('active');
                    else link.classList.remove('active');
                });
                // إذا كانت صفحة tips (بدون رموز) لا داعي لإعادة الرسم
                if (pageId !== 'tips') {
                    renderPage(pageId);
                }
            }

            // ربط أزرار التنقل
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const page = link.dataset.page;
                    if (page) switchPage(page);
                });
            });

            // ربط حقول البحث
            for (let [pageId, input] of Object.entries(searches)) {
                if (input) {
                    input.addEventListener('input', (e) => {
                        searchTerms[pageId] = e.target.value.trim();
                        renderPage(pageId);
                    });
                }
            }

            // زر تثبيت PWA (محاكي)
            document.getElementById('installPwa').addEventListener('click', () => {
                alert('يمكنك تثبيت هذا التطبيق على شاشتك الرئيسية من خلال قائمة المتصفح (إضافة إلى الشاشة الرئيسية).');
            });

            // إغلاق المودال
            closeModal.addEventListener('click', () => modal.style.display = 'none');
            window.addEventListener('click', (e) => { if(e.target === modal) modal.style.display = 'none'; });

            // بدء التشغيل بالصفحة الرئيسية
            switchPage('home');
        })();
    </script>
</body>
</html>
